{"version":3,"sources":["camera.js","graphicsCommon.js","main.js","menu.js","player.js","world.js"],"names":["cameraFollow","cameraFocusCenterX","camPanX","canvas","width","cameraFocusCenterY","camPanY","height","playerDistFromCameraFocusX","Math","abs","activeObjects","position","x","playerDistFromCameraFocusY","y","PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_X","PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_Y","colorRect","topleftX","topleftY","boxWidth","boxHeight","fillColor","canvasContext","fillStyle","fillRect","colorCircle","centerX","centerY","radius","beginPath","arc","PI","fill","colorText","words","textX","textY","fillText","drawBitmapCenteredWithRotation","useBitmap","atX","atY","withAng","save","translate","rotate","drawImage","restore","drawSpritemap","spriteX","spriteY","spriteWidth","spriteHeight","clearScreen","activeAssets","sliderX","sliderY","window","onload","document","getElementById","getContext","heigh","addEventListener","keyPressed","keyReleased","loadAssets","loadWorld","loadCharacters","loadMenu","startGame","evt","keyAction","newVal","player","index","keysHeld","indexOf","keyCode","push","splice","assets","i","assetElem","createElement","src","id","split","console","log","world","World","drawWorld","Player","framesPerSecond","gameloopId","setInterval","gameLoop","draw","menuOptions","title","name","self","spriteSelected","sprite","find","elem","skills","playerSkills","attributes","speed","controls","Left","Up","Right","Down","angle","move","includes","Skill","skill","difficulty","maxLevel","currentLevel","IncreaseSkill","points","Fighting","Healing","Blocking","tilesets","Town","Tiles","TileHeight","TileWidth","Grass","Path","Wall","House","Forest","Trees","town","tileSet","grid","tile","tileset","row","col","itemAtLoc","brickLeftEdgeX","brickTopEdgeY"],"mappings":"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","file":"bundle.js","sourcesContent":["\r\nfunction cameraFollow() {\r\n    var cameraFocusCenterX = camPanX + canvas.width / 2;\r\n    var cameraFocusCenterY = camPanY + canvas.height / 2;\r\n\r\n    var playerDistFromCameraFocusX = Math.abs(activeObjects[1].position.x - cameraFocusCenterX);\r\n    var playerDistFromCameraFocusY = Math.abs(activeObjects[1].position.y - cameraFocusCenterY);\r\n\r\n    if (playerDistFromCameraFocusX > PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_X) {\r\n      if (cameraFocusCenterX < activeObjects[1].position.x) {\r\n        camPanX += 5;\r\n      } else {\r\n        camPanX -= 5;\r\n      }\r\n    }\r\n    if (playerDistFromCameraFocusY > PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_Y) {\r\n      if (cameraFocusCenterY < activeObjects[1].position.y) {\r\n        camPanY += 5;\r\n      } else {\r\n        camPanY -= 5;\r\n      }\r\n      //console.log(camPanX, camPanY)\r\n    }\r\n\r\n    // instantCamFollow();\r\n\r\n    // this next code blocks the game from showing out of bounds\r\n    // (this isn't required, if you don't mind seeing beyond edges)\r\n    // if (camPanX < 0) {\r\n    //   camPanX = 0;\r\n    // }\r\n    // if (camPanY < 0) {\r\n    //   camPanY = 0;\r\n    // }\r\n    // var maxPanRight = BRICK_COLS * BRICK_W - canvas.width;\r\n    // var maxPanTop = BRICK_ROWS * BRICK_H - canvas.height;\r\n    // if (camPanX > maxPanRight) {\r\n    //   camPanX = maxPanRight;\r\n    // }\r\n    // if (camPanY > maxPanTop) {\r\n    //   camPanY = maxPanTop;\r\n    // }\r\n  }","function colorRect(topleftX, topleftY, boxWidth, boxHeight, fillColor) {\r\n    canvasContext.fillStyle = fillColor\r\n    canvasContext.fillRect(topleftX, topleftY, boxWidth, boxHeight);\r\n}\r\n\r\nfunction colorCircle(centerX, centerY, radius, fillColor) {\r\n    canvasContext.fillStyle = fillColor;\r\n    canvasContext.beginPath();\r\n    canvasContext.arc(centerX, centerY, radius, 0, Math.PI * 2, true)\r\n    canvasContext.fill();\r\n}\r\n\r\nfunction colorText(words, textX, textY, fillColor) {\r\n    canvasContext.fillStyle = fillColor;\r\n    canvasContext.fillText(words, textX, textY)\r\n}\r\n\r\nfunction drawBitmapCenteredWithRotation(useBitmap, atX, atY, withAng) {\r\n    canvasContext.save();\r\n    canvasContext.translate(atX, atY);\r\n    canvasContext.rotate(withAng);\r\n    canvasContext.drawImage(useBitmap, -useBitmap.width / 2, -useBitmap.height / 2);\r\n    canvasContext.restore();\r\n}\r\n\r\nfunction drawSpritemap(useBitmap, atX, atY, spriteX, spriteY, spriteWidth, spriteHeight) {\r\n    canvasContext.save();\r\n    canvasContext.translate(atX, atY);\r\n    //canvasContext.rotate(withAng); \r\n    canvasContext.drawImage(useBitmap, spriteX, spriteY, spriteWidth, spriteHeight, \r\n                            0, 0, spriteWidth, spriteHeight);\r\n    canvasContext.restore();\r\n}\r\n\r\nfunction clearScreen() {\r\n    colorRect(0, 0, canvas.width, canvas.height, 'white');\r\n}\r\n\r\n","var canvas;\r\nvar canvasContext;\r\nvar activeObjects = [];\r\nvar activeAssets = [];\r\nvar camPanX = 0;\r\nvar camPanY = 0;\r\n\r\nvar sliderX = 0;\r\nvar sliderY = 0;\r\n\r\nconst PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_X  = 150;\r\nconst PLAYER_DIST_FROM_CENTER_BEFORE_CAMERA_PAN_Y  = 100;\r\n\r\nwindow.onload = function () {\r\n    canvas = document.getElementById(\"gameCanvas\")\r\n    canvasContext = canvas.getContext('2d');\r\n\r\n    colorRect(0, 0, canvas.width, canvas.heigh, \"black\");\r\n    colorText(\"Loading Images\", canvas.width / 2, canvas.height / 2);\r\n\r\n    document.addEventListener('keydown', keyPressed);\r\n    document.addEventListener('keyup', keyReleased);\r\n\r\n    loadAssets();\r\n    loadWorld();\r\n    loadCharacters();\r\n\r\n    // Run game\r\n\r\n    loadMenu();\r\n\r\n    startGame();\r\n}\r\n\r\n\r\nfunction keyPressed(evt) {\r\n    //console.log(evt)\r\n    keyAction(evt, true);\r\n    //evt.preventDefault();\r\n}\r\n\r\nfunction keyReleased(evt) {\r\n    keyAction(evt, false);\r\n    //evt.preventDefault();\r\n}\r\n\r\nfunction keyAction(evt, newVal) {\r\n    var player = activeObjects[1];\r\n    index = player.keysHeld.indexOf(evt.keyCode);\r\n\r\n    if (newVal && index < 0) {\r\n        player.keysHeld.push(evt.keyCode);\r\n    }\r\n    else {\r\n        player.keysHeld.splice(index, 1);\r\n    }\r\n}\r\n\r\nfunction loadAssets() {\r\n    var assets = [\r\n        \"characters/character.png\",\r\n        \"characters/cat.png\",\r\n        \"backgrounds/towntileset.png\",\r\n    ]\r\n\r\n    for (i in assets) {\r\n        var assetElem = document.createElement(\"img\");\r\n        assetElem.src = \"assets/sprites/\" + assets[i];\r\n        assetElem.id = assets[i].split(\"/\")[1].split(\".\")[0];\r\n        activeAssets.push(assetElem);\r\n    }\r\n    console.log(activeAssets);\r\n}\r\n\r\nfunction loadWorld() {\r\n    var world = new World(\"Town\");\r\n    activeObjects.push(world);\r\n}\r\n\r\nfunction drawWorld() {\r\n    colorRect(0, 0, canvas.width, canvas.height, \"white\");\r\n}\r\n\r\nfunction loadCharacters() {\r\n    var player = new Player(\"One\", activeAssets[0]);\r\n\r\n    activeObjects.push(player);\r\n    console.log(activeObjects);\r\n}\r\nfunction startGame() {\r\n    var framesPerSecond = 30;\r\n    gameloopId = setInterval(gameLoop, 1000 / framesPerSecond);\r\n\r\n    //setTimeout(function () {\r\n    //        clearInterval(gameloopId);\r\n    //}, 200);\r\n\r\n}\r\n\r\nfunction gameLoop() {\r\n    //drawWorld();\r\n    for (i in activeObjects) {\r\n        activeObjects[i].draw();\r\n    }\r\n    cameraFollow();\r\n}","// Menu Bar\r\n\r\nfunction loadMenu() {\r\n    // Show a menu before the game loads\r\n\r\n    //Start game\r\n    //Load Game\r\n    //About\r\n\r\n    clearScreen();\r\n\r\n    var menuOptions = [\r\n        { title: \"Start Game\" }, { title: \"About Game\" }\r\n    ];\r\n\r\n\r\n    for (i in menuOptions) {\r\n        colorRect(canvas.width / 2, canvas.height / 2 + (i * 60), 80, 40, \"black\");\r\n        colorRect(canvas.width / 2 + 2, canvas.height / 2 + 2 + (i * 60), 76, 36, \"white\");\r\n\r\n        colorText(menuOptions[i].title, canvas.width / 2 + 10, canvas.height / 2 + 20 + (i * 60), \"black\");\r\n    }\r\n}","function Player(name) {\r\n    self = this;\r\n\r\n    self.name = name;\r\n    self.spriteSelected = \"character\"\r\n    self.sprite = activeAssets.find(function(elem) { return elem.id == self.spriteSelected})\r\n    \r\n    self.skills = playerSkills();\r\n    self.attributes = { speed: 5};\r\n\r\n    // Using WASD\r\n    self.controls = { Left: 65, Up: 87, Right: 68, Down: 83, };\r\n    self.keysHeld = [];\r\n    self.position = { x: 10, y: 10, angle: 0, };\r\n\r\n    self.move = function() {\r\n        //console.log(\"moving\", self.keysHeld);\r\n        if (self.keysHeld.includes(self.controls.Left)){\r\n            self.position.x -= self.attributes.speed;\r\n        }\r\n        if (self.keysHeld.includes(self.controls.Right)){\r\n            self.position.x += self.attributes.speed;\r\n        }\r\n        if (self.keysHeld.includes(self.controls.Down)){\r\n            self.position.y += self.attributes.speed;\r\n        }\r\n        if (self.keysHeld.includes(self.controls.Up)){\r\n            self.position.y -= self.attributes.speed;\r\n        }\r\n    }\r\n\r\n    self.draw = function () {\r\n        // Called every loop (30 per second);\r\n        self.move();\r\n        drawBitmapCenteredWithRotation(self.sprite, self.position.x,  self.position.y, 0);\r\n    }\r\n}\r\n\r\nfunction Skill(skill) {\r\n    var self = this;\r\n\r\n    self.id = skill.id;\r\n    self.name = skill.name;\r\n    self.difficulty = skill.difficulty;\r\n\r\n    self.maxLevel = 1000;\r\n    self.currentLevel = 0;\r\n\r\n    self.IncreaseSkill = function (points) {\r\n        if (points > self.difficulty) {\r\n            self.currentLevel++;\r\n        }\r\n    }\r\n}\r\n\r\nfunction playerSkills() {\r\n    return {\r\n        Fighting: new Skill({ id: 1, name: 'Fighting', difficulty: 1 }),\r\n        Healing: new Skill({ id: 2, name: 'Healing', difficulty: 1 }),\r\n        Blocking: new Skill({ id: 3, name: 'Blocking', difficulty: 1 }),\r\n    }\r\n}","\r\nfunction World(world) {\r\n    var self = this;\r\n    self.tilesets = {\r\n        Town: {\r\n            Tiles: activeAssets.find(function (elem) { return elem.id == \"towntileset\" }),\r\n            TileHeight: 40,\r\n            TileWidth: 40,\r\n            Grass: 0,\r\n            Path: 1,\r\n            Wall: 2,\r\n            House: 3\r\n        },\r\n        Forest: {\r\n            Tiles: activeAssets.find(function (elem) { return elem.id == \"foresttileset\" }),\r\n            TileHeight: 40,\r\n            TileWidth: 40,\r\n            Grass: 0,\r\n            Path: 1,\r\n            Trees: 2\r\n        }\r\n    }\r\n\r\n    self.town = {\r\n        name: 'town',\r\n        tileSet: 'town',\r\n        grid: [\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 3, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 3, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \r\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        ]\r\n    };\r\n\r\n    self.draw = function () {\r\n        var tile = self.tilesets.Town.Tiles;\r\n        var tileset = self.tilesets.Town;\r\n\r\n        for (row in self.town.grid) {\r\n            for (col in self.town.grid[row]) {\r\n                var itemAtLoc = self.town.grid[row][col];\r\n                var brickLeftEdgeX = col * tileset.TileWidth;\r\n                var brickTopEdgeY = row * tileset.TileHeight;\r\n                var spriteX = 0;\r\n                var spriteY = tileset.TileHeight * itemAtLoc;\r\n\r\n                drawSpritemap(tile, brickLeftEdgeX, brickTopEdgeY, spriteX, spriteY, tileset.TileWidth, tileset.TileHeight);\r\n\r\n            }\r\n        }\r\n        return\r\n    }\r\n\r\n}\r\n"]}